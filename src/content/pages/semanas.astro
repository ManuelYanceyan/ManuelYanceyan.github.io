---
import Accordion from "../components/Accordion";
import { getCollection } from "astro:content";
import { marked } from "marked"; // Para convertir markdown en HTML

// Leemos todos los archivos de src/semanas/
const semanas = await getCollection("semanas");

// Ordenamos por número de semana
const sortedSemanas = semanas.sort((a, b) => a.data.week - b.data.week);

// Preparamos items para el acordeón
const items = sortedSemanas.map((semana) => ({
  title: semana.data.title,
  content: marked.parse(semana.body), // Convertimos markdown a HTML
}));
---

<div class="py-10">
  <h1 class="text-3xl font-bold mb-6 text-center">
    Reporte de Aprendizaje por Semanas
  </h1>
  <Accordion items={items} />
</div>
